"use strict";(self.webpackChunktop_battleship=self.webpackChunktop_battleship||[]).push([[792],{56:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function a(e){for(var a=-1,n=0;n<t.length;n++)if(t[n].identifier===e){a=n;break}return a}function n(e,n){for(var i={},o=[],s=0;s<e.length;s++){var l=e[s],d=n.base?l[0]+n.base:l[0],c=i[d]||0,u="".concat(d," ").concat(c);i[d]=c+1;var h=a(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var m=r(p,n);n.byIndex=s,t.splice(s,0,{identifier:u,updater:m,references:1})}o.push(u)}return o}function r(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,r){var i=n(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=a(i[o]);t[s].references--}for(var l=n(e,r),d=0;d<i.length;d++){var c=a(i[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",n=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),n&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),n&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,n,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);n&&o[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),a&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=a):c[2]=a),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},354:e=>{e.exports=function(e){var t=e[1],a=e[3];if(!a)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),i="/*# ".concat(r," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},429:(e,t,a)=>{var n=a(72),r=a.n(n),i=a(825),o=a.n(i),s=a(659),l=a.n(s),d=a(56),c=a.n(d),u=a(540),h=a.n(u),p=a(113),m=a.n(p),b=a(509),f={};f.styleTagTransform=m(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=h(),r()(b.A,f),b.A&&b.A.locals&&b.A.locals;class y{constructor(e,t=0,a=!1){this.shipType=e,this.hits=t,this.sunk=a,this.length=this.setLength(e)}hit(){this.hits+=1,this.isSunk()}isSunk(){return this.hits==this.length&&(this.sunk=!0),this.sunk}setLength(e){let t=this.length;switch(e.toLowerCase()){case"carrier":t=5;break;case"battleship":t=4;break;case"destroyer":case"submarine":t=3;break;case"patrolboat":t=2}return t}}class v{constructor(){this.board=this.createBoard(),this.unplacedShips=["carrier","battleship","destroyer","submarine","patrolboat"],this.placedShips=new Set,this.positions=new Object,this.squaresSelected=new Set,this.sunkShips=new Set}createBoard(){let e=new Array(10);for(let t=0;t<e.length;t++){let a=new Array(10).fill(null);for(let n=0;n<e.length;n++)e[t]=a}return e}aiPositionShip(){for(;this.unplacedShips.length>0;){const e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random()),a=1==Math.floor(2*Math.random())?"vertical":"horizontal";try{this.positionShip(e,t,a,this.unplacedShips[0])}catch(e){continue}}}positionShip(e,t,a,n){let r=new y(n),i=[];if(this.placedShips.has(n))throw new Error("Ship has already been placed");for(let n=0;n<r.length;n++){if("horizontal"==a&&null!==this.board[e][t+n])throw new Error("Ship already placed here");if("vertical"==a&&null!==this.board[e+n][t])throw new Error("Ship already placed here")}if(e+r.length>=10&&"vertical"==a)throw new Error("Attempting to place ship off the gameboard");if(t+r.length>=10&&"horizontal"==a)throw new Error("Attempting to place ship off the gameboard");for(let o=0;o<r.length;o++)"horizontal"==a?(i.push([e,t+o]),this.board[e][t+o]=n):"vertical"==a&&(i.push([e+o,t]),this.board[e+o][t]=n);return this.unplacedShips=this.unplacedShips.filter((e=>e!==n)),this.placedShips.add(n),r.positions=i,this.positions[n]=r,!0}receiveAttack(e,t){let a;return null!==this.board[e][t]?(a=this.board[e][t],this.positions[a].hit(),this.positions[a].sunk):(this.board[e][t]="miss","miss")}}class g{constructor(e=null,t=!0){this.realPlayer=t,this.playerName=this.setPlayerName(e),this.gameboard=new v,this.createAiBoard()}createAiBoard(){0==this.realPlayer&&this.gameboard.aiPositionShip(),console.log(`in player class. player name is: ${this.playerName}`)}setPlayerName(e){return null!=e?e:null==e&&this.realPlayer?"Player":"AI"}}function A(e){for(let t=0;t<10;t++)for(let a=0;a<10;a++){const n=document.createElement("div");n.classList.add("cell"),n.setAttribute("data-row",`${t}`),n.setAttribute("data-column",`${a}`),e.appendChild(n)}}class C{constructor(e,t){this.player=e,this.ai=t,this.turnIsPlayer=!0}turn(){this.turnIsPlayer?this.playerChoice():this.aiChoice()}playerChoice(){let e,t,a;document.querySelectorAll("#aiGameboard > .cell").forEach((n=>{n.addEventListener("click",(()=>{e=n.getAttribute("data-row"),t=n.getAttribute("data-column"),a=n.parentElement.id,this.evaluateAttack(e,t,this.ai,a)}))}))}aiChoice(){let e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());const a=this.player;for(;a.gameboard.squaresSelected.has(`${e}-${t}`);)e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());this.evaluateAttack(e,t,a,"playerGameboard")}evaluateAttack(e,t,a,n){let r,i;if(a.gameboard.squaresSelected.has(`${e}-${t}`))return!1;if(a.gameboard.squaresSelected.add(`${e}-${t}`),null!==a.gameboard.board[e][t]?(i=a.gameboard.board[e][t],r="hit"):r="miss","hit"==r){const e=a.gameboard.positions[i];e.hit(),e.isSunk()&&(console.log(`${e.shipType} is sunk!`),a.gameboard.sunkShips.add(e.shipType))}!function(e,t,a,n){const r=document.querySelector(`#${a} > div[data-row="${e}"][data-column="${t}"]`);r.removeAttribute("class","cell"),r.setAttribute("class","cell-occupied"),"hit"==n?r.style.setProperty("background-color","red"):"miss"==n&&r.style.setProperty("background-color","white"),r.style.setProperty("border","1px solid darkgrey")}(e,t,n,r),5==a.gameboard.sunkShips.size?this.endGame():(this.turnIsPlayer=!this.turnIsPlayer,this.turn())}endGame(){const e=this.turnIsPlayer?localStorage.getItem("username"):"AI",t=(this.turnIsPlayer?this.player:this.ai).gameboard.squaresSelected.size;(this.turnIsPlayer?this.ai:this.player).gameboard.squaresSelected.size,console.log(`${e} WINS!`),function(e,t){const a=document.createElement("div"),n=document.createElement("div"),r=document.createElement("p"),i=document.createElement("button");a.setAttribute("id","myModal"),a.classList.add("modal"),n.classList.add("modal-content"),i.setAttribute("id","new-game"),document.body.appendChild(a),a.appendChild(n),n.appendChild(r),n.appendChild(i),i.textContent="New Game",a.style.display="block",i.onclick=function(){a.style.display="none",localStorage.removeItem("username"),location.reload()},r.textContent=`${e} wins in ${t} moves!`}(e,t)}}console.log("Actually, we ARE in production"),function(){const e=document.createElement("div"),t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),r=document.createElement("h2"),i=document.createElement("h2"),o=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),d=document.createElement("div");e.classList.add("header"),t.classList.add("content"),a.classList.add("content-side"),a.setAttribute("id","player-side"),n.classList.add("content-side"),n.setAttribute("id","ai-side"),r.classList.add("gameboard-header"),r.setAttribute("id","player-header"),o.classList.add("gameboard"),o.setAttribute("id","playerGameboard"),i.classList.add("gameboard-header"),i.setAttribute("id","ai-header"),s.classList.add("gameboard"),s.setAttribute("id","aiGameboard"),l.setAttribute("id","shipyard-container"),d.setAttribute("id","shipyard"),document.body.appendChild(e),document.body.appendChild(t),t.appendChild(a),t.appendChild(l),t.appendChild(n),a.appendChild(r),a.appendChild(o),l.appendChild(d),n.appendChild(i),n.appendChild(s),r.textContent="Player",i.textContent="Computer"}(),function(){const e=document.createElement("div"),t=document.createElement("div"),a=document.createElement("form"),n=document.createElement("div"),r=document.createElement("h2"),i=document.createElement("input"),o=document.createElement("label"),s=document.createElement("button");e.setAttribute("id","overlay"),t.setAttribute("id","welcome-modal"),t.classList.add("modal"),a.setAttribute("id","modal-form"),n.classList.add("modal-content"),s.setAttribute("id","submit-name"),s.setAttribute("type","submit"),i.setAttribute("type","text"),i.setAttribute("placeholder","Admiral"),i.setAttribute("id","username"),i.setAttribute("autocomplete","off"),o.setAttribute("for","username"),a.setAttribute("method","post"),document.body.appendChild(t),t.appendChild(a),a.appendChild(n),n.appendChild(r),n.appendChild(o),n.appendChild(i),n.appendChild(s),r.textContent="Identify yourself, Sailor!",o.textContent="Name",s.textContent="Submit",t.style.display="block"}();const S=document.getElementById("playerGameboard"),E=document.getElementById("aiGameboard");A(S),A(E);const w=new y("carrier");!function(e,t){const a=document.getElementById("shipyard"),n=document.createElement("div");n.setAttribute("id",`${e}`),n.classList.add("ship"),n.setAttribute("draggable","true");for(let e=0;e<t;e++){const e=document.createElement("div");e.classList.add("cell"),n.appendChild(e)}a.appendChild(n)}(w.shipType,w.length);const k=document.getElementById("welcome-modal"),I=document.getElementById("modal-form"),x=document.getElementById("username");I.addEventListener("submit",(e=>{e.preventDefault(),localStorage.setItem("username",x.value);const t=localStorage.getItem("username"),a=new g(t,!1),n=new g(null,!1);new C(a,n).turn(),k.style.display="none"}))},509:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(354),r=a.n(n),i=a(314),o=a.n(i)()(r());o.push([e.id,"// extracted by mini-css-extract-plugin\nexport {};","",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;QACS,CAAA",sourcesContent:["// extracted by mini-css-extract-plugin\nexport {};"],sourceRoot:""}]);const s=o},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},659:e=>{var t={};e.exports=function(e,a){var n=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(a)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var n="";a.supports&&(n+="@supports (".concat(a.supports,") {")),a.media&&(n+="@media ".concat(a.media," {"));var r=void 0!==a.layer;r&&(n+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),n+=a.css,r&&(n+="}"),a.media&&(n+="}"),a.supports&&(n+="}");var i=a.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},e=>{e(e.s=429)}]);
//# sourceMappingURL=main.js.map